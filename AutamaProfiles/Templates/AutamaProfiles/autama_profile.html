{% extends 'base.html' %}


{% block csstyle %}
    <style>
    div.profile{
        height: 450px;
        width: 350px;
        border: 2px solid #d4cce0;
        box-shadow: 10px 10px 5px #888888;
        border-radius: 15px;
        float: none;
        display: block;
        margin-left: auto;
        margin-right: auto;
        margin-top: 15%;
        margin-bottom: auto;
        overflow: scroll;
    }

    div.profile > img{
        height: 370px;
        width: 350px;
        border-radius: 15px;
    }

     div.profile > div:nth-child(1){
        background-color: #9e9e9e59;
    }

    div.profile > div:nth-child(2){
        margin-top: 30px;
    }

    .name{
        background: linear-gradient(to right bottom, rgba(252, 79, 108, 1) 50%, rgba(245, 114, 88, 1) 70%);
        -webkit-background-clip: text;
        color: transparent;
    }

    .intro{
        margin-top: auto;
        float: left;
        height:45px;
        border-radius: 3px;
        background-image: linear-gradient(90deg, rgba(252, 79, 108, 1) 50%, rgba(245, 114, 88, 1) 70%);
        text-align: center;
        vertical-align: center;
        margin-left: 15px;

    }

    </style>
{%  endblock %}

{% block content %}
    <h2 class="intro">
        Autama Profile
    </h2>
    <div style="width: 80%; margin-top: 50px; margin: auto; ">

        <div class="profile">
            <img src="{{ profile.picture.url }}">
            <span class="name" style="font-weight: bold; font-size: xx-large; margin-left: 10px">{{profile.first }}</span>

            <div style="font-size: x-large; color: black; margin-left: 10px; margin-bottom: 5px">
                Introduce
            </div>
            <div style="font-size: medium; color: gray; margin-left: 10px; margin-bottom: 5px">
                Autama ID: {{ profile.autamaid }}
            </div>
            <div style="font-size: medium; color: gray; margin-left: 10px; margin-bottom: 5px">
                Interests: {{ profile.interest1 }}, {{ profile.interest2 }}, {{ profile.interest3 }}
            </div>
            <div style="font-size: medium; color: gray; margin-left: 10px; margin-bottom: 5px">
                Owner: {{ profile.owner }}
            </div>

            <div style="font-size: medium; color: gray; margin-left: 10px; margin-bottom: 5px">
                Pickle: {{ profile.pickle }}
            </div>
            <div style="font-size: medium; color: gray; margin-left: 10px; margin-bottom: 5px" id="creator">
                Creator: {{ profile.creator }}
            </div>
            <div style="font-size: medium; color: gray; margin-left: 10px; margin-bottom: 5px" id="match_number">
                Match number: {{ profile.nummatches }}
            </div>
            <div style="font-size: medium; color: gray; margin-left: 10px; margin-bottom: 5px">
                <button class="btn btn-default btn-lg" style="background-image: linear-gradient(90deg, rgba(252, 79, 108, 1) 50%, rgba(245, 114, 88, 1) 70%);" onclick="match_robot()">Claim</button>
                <button class="btn btn-default btn-lg" style="background-image: linear-gradient(90deg, rgba(252, 79, 108, 1) 50%, rgba(245, 114, 88, 1) 70%);" onclick="share_robot()">Share</button>
            </div>


        </div>

    </div>

{% endblock %}

{% block js %}
    <script type="application/javascript">
     $("#creator").hide();
     $("#match_number").hide();
    function copyText(text) {
        var textarea = document.createElement("input");
        var currentFocus = document.activeElement;
        document.body.appendChild(textarea);
        textarea.value = text;
        textarea.focus();
        if(textarea.setSelectionRange)
            textarea.setSelectionRange(0, textarea.value.length);
        else
            textarea.select();
        try {
            var flag = document.execCommand("copy");
        } catch(eo) {
            var flag = false;
        }
        document.body.removeChild(textarea);
        currentFocus.focus();
        return flag;
    }

    function match_robot() {
        $.post("/AutamaProfiles/claim/", {'autama_id': {{profile.autamaid}},"csrfmiddlewaretoken": "{{ csrf_token }}"},function(result){
            $("#creator").html("creator:"+ result['creator']);
            $("#creator").show();
            $("#match_number").html("match_number:"+result['match_num']);
            $("#match_number").show();

          });
    }
    function share_robot() {

        var s = "http://127.0.0.1:8000/AutamaProfiles/{{ profile.autamaid }}-{{ profile.first }}-{{ profile.last }}/";
        copyText(s);
        alert("Copy successfulÔºÅ");
    }
    </script>
{% endblock %}
